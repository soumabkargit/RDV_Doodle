/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C3*/SET SCHEMA PUBLIC
drop table Allergie if exists
drop table Allergie_Utilisateur if exists
drop table PreferenceAlimentaire if exists
drop table PreferenceAlimentaire_Utilisateur if exists
drop table Reunion if exists
drop table Sondage if exists
drop table Sondage_Reunion if exists
drop table Utilisateur if exists
drop table Utilisateur_Allergie if exists
drop table Utilisateur_PreferenceAlimentaire if exists
create table Allergie (idAllergie integer generated by default as identity (start with 1), libelleAllergie varchar(255), primary key (idAllergie))
create table Allergie_Utilisateur (Allergie_idAllergie integer not null, utilisateurs_email varchar(255) not null)
create table PreferenceAlimentaire (idPreferenceAlimentaire integer generated by default as identity (start with 1), libellePreferenceAlimentaire varchar(255), primary key (idPreferenceAlimentaire))
create table PreferenceAlimentaire_Utilisateur (PreferenceAlimentaire_idPreferenceAlimentaire integer not null, utilisateurs_email varchar(255) not null)
create table Reunion (idReunion integer generated by default as identity (start with 1), intitule varchar(255), resume varchar(255), sondage_idSondage integer, primary key (idReunion))
create table Sondage (idSondage integer generated by default as identity (start with 1), dateSondage date, utilisateur_email varchar(255), primary key (idSondage))
create table Sondage_Reunion (Sondage_idSondage integer not null, reunions_idReunion integer not null)
create table Utilisateur_Allergie (Utilisateur_email varchar(255) not null, allergies_idAllergie integer not null)
create table Utilisateur_PreferenceAlimentaire (Utilisateur_email varchar(255) not null, preferenceAlimentaires_idPreferenceAlimentaire integer not null)
alter table Sondage_Reunion add constraint UK_4lyvblu9mdes1oljbi0k28qs4  unique (reunions_idReunion)
alter table Allergie_Utilisateur add constraint FK_9lnauu3jxtikmyi283wxxeg8w foreign key (Allergie_idAllergie) references Allergie
alter table PreferenceAlimentaire_Utilisateur add constraint FK_4pq8l6c7iavc2vtgdkmios0x8 foreign key (PreferenceAlimentaire_idPreferenceAlimentaire) references PreferenceAlimentaire
alter table Reunion add constraint FK_enlue4lxp0kccfrrloj5xge8b foreign key (sondage_idSondage) references Sondage
alter table Sondage_Reunion add constraint FK_4lyvblu9mdes1oljbi0k28qs4 foreign key (reunions_idReunion) references Reunion
alter table Sondage_Reunion add constraint FK_reyajuw8wm7l23dtfycxbpajl foreign key (Sondage_idSondage) references Sondage
alter table Utilisateur_Allergie add constraint FK_is9uag0ds86hxq6c9pr2qs9j1 foreign key (allergies_idAllergie) references Allergie
alter table Utilisateur_PreferenceAlimentaire add constraint FK_pkxlyfxs9ykqex2k68veqdrka foreign key (preferenceAlimentaires_idPreferenceAlimentaire) references PreferenceAlimentaire
/*C2*/SET SCHEMA PUBLIC
DISCONNECT

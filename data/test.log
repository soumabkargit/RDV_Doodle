/*C3*/SET SCHEMA PUBLIC
alter table ChoixDate drop constraint FK_9tg3vx16urlw0j6ag1yiqxuoa
alter table Participant drop constraint FK_1jp3xvpmje9sllayhmqosgulm
alter table Participant_Allergie drop constraint FK_tcs9ibwiw2324t3xl6t0knbkj
alter table Participant_Allergie drop constraint FK_epro1vogcmb9yjyhypbvchisn
alter table Sondage drop constraint FK_gyy7reowkcox2140gc4pkkejw
alter table Sondage drop constraint FK_s7hxr2t26jhrofua4lwgbuj18
alter table Sondage drop constraint FK_6am8w6tsu7q2er10spg5y2g9o
alter table Sondage_Participant drop constraint FK_nypx9cpui67ybvh4ixl7tn3a2
alter table Sondage_Participant drop constraint FK_owctvpwaefvijmh2ymjkfht1a
drop table Allergie if exists
drop table ChoixDate if exists
drop table Participant if exists
drop table Participant_Allergie if exists
drop table PreferenceAlimentaire if exists
drop table Reunion if exists
drop table Sondage if exists
drop table Sondage_Participant if exists
drop table Utilisateur if exists
create table Allergie (idAllergie integer generated by default as identity (start with 1), libelleAllergie varchar(255), primary key (idAllergie))
create table ChoixDate (idChoixDate integer generated by default as identity (start with 1), dateSondage timestamp, pauseDejeuner boolean not null, sondage_idSondage integer, primary key (idChoixDate))
create table Participant (email varchar(255) not null, nom varchar(255), prenom varchar(255), preferenceAlimentaire_idPreferenceAlimentaire integer, primary key (email))
create table Participant_Allergie (emailParticipant varchar(255) not null, idAllergie integer not null)
create table PreferenceAlimentaire (idPreferenceAlimentaire integer generated by default as identity (start with 1), libellePreferenceAlimentaire varchar(255), primary key (idPreferenceAlimentaire))
create table Reunion (idReunion integer generated by default as identity (start with 1), intitule varchar(255), resume varchar(255), primary key (idReunion))
create table Sondage (idSondage integer generated by default as identity (start with 1), choixDateSondage_idChoixDate integer, reunion_idReunion integer, utilisateur_email varchar(255), primary key (idSondage))
create table Sondage_Participant (idSondage integer not null, emailParticipant varchar(255) not null)
create table Utilisateur (email varchar(255) not null, nom varchar(255), prenom varchar(255), primary key (email))
alter table ChoixDate add constraint FK_9tg3vx16urlw0j6ag1yiqxuoa foreign key (sondage_idSondage) references Sondage
alter table Participant add constraint FK_1jp3xvpmje9sllayhmqosgulm foreign key (preferenceAlimentaire_idPreferenceAlimentaire) references PreferenceAlimentaire
alter table Participant_Allergie add constraint FK_tcs9ibwiw2324t3xl6t0knbkj foreign key (idAllergie) references Allergie
alter table Participant_Allergie add constraint FK_epro1vogcmb9yjyhypbvchisn foreign key (emailParticipant) references Participant
alter table Sondage add constraint FK_gyy7reowkcox2140gc4pkkejw foreign key (choixDateSondage_idChoixDate) references ChoixDate
alter table Sondage add constraint FK_s7hxr2t26jhrofua4lwgbuj18 foreign key (reunion_idReunion) references Reunion
alter table Sondage add constraint FK_6am8w6tsu7q2er10spg5y2g9o foreign key (utilisateur_email) references Utilisateur
alter table Sondage_Participant add constraint FK_nypx9cpui67ybvh4ixl7tn3a2 foreign key (emailParticipant) references Participant
alter table Sondage_Participant add constraint FK_owctvpwaefvijmh2ymjkfht1a foreign key (idSondage) references Sondage
